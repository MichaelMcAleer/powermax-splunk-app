<form>
    <label>Initiators</label>
    <search id="vmax_24hr_data">
        <query>`vmax_initiator` array_id=$array_tok$ host_id=$host_tok$
            initiator_id=$init_tok$
            | fields array_id, initiator_id, host_id, host_ios, reads, writes,
            mbs, host_mb_reads, host_mb_writes,
            response_time, read_response_time, write_response_time,
            sys_call_count
        </query>
        <earliest>$time_tok.earliest$</earliest>
        <latest>$time_tok.latest$</latest>
    </search>
    <search id="vmax_recent_data">
        <query>`vmax_initiator` array_id=$array_tok$ initiator_id=$init_tok$
            host_id=$host_tok$
            | head 10000 | dedup array_id, initiator_id, dir_port_keys{}
            | fields array_id, initiator_id, fc_id, host_id, type,
            dir_port_keys{}, logged_in, on_fabric,
            num_of_host_groups, host_group{}, num_of_masking_views,
            masking_view{}, num_of_vols, port_flags_override,
            enabled_flags{}, disabled_flags{}, host_ios, host_mb_reads,
            host_mb_writes, mbs, response_time, reads,
            read_response_time, read_latency, writes, write_response_time,
            write_latency, sys_call_count
        </query>
        <earliest>-15m</earliest>
        <latest>now</latest>
    </search>
    <fieldset submitButton="false" autoRun="true">
        <input type="dropdown" token="array_tok" searchWhenChanged="true">
            <label>Array ID</label>
            <choice value="*">ALL</choice>
            <search>
                <query>`vmax_array` | dedup array_id | table array_id | sort
                    array_id
                </query>
                <earliest>$time_tok.earliest$</earliest>
                <latest>$time_tok.latest$</latest>
            </search>
            <fieldForLabel>array_id</fieldForLabel>
            <fieldForValue>array_id</fieldForValue>
            <default>*</default>
        </input>
        <input type="dropdown" token="host_tok" searchWhenChanged="true">
            <label>Host ID</label>
            <choice value="*">ALL</choice>
            <search>
                <query>`vmax_initiator` array_id=$array_tok$ | dedup host_id |
                    table host_id | sort host_id
                </query>
                <earliest>$time_tok.earliest$</earliest>
                <latest>$time_tok.latest$</latest>
            </search>
            <fieldForLabel>host_id</fieldForLabel>
            <fieldForValue>host_id</fieldForValue>
            <default>*</default>
        </input>
        <input type="dropdown" token="init_tok" searchWhenChanged="true">
            <label>Initiator ID</label>
            <choice value="*">ALL</choice>
            <search>
                <query>`vmax_initiator` array_id=$array_tok$ host_id=$host_tok$
                    | dedup initiator_id | table
                    initiator_id | sort initiator_id
                </query>
                <earliest>$time_tok.earliest$</earliest>
                <latest>$time_tok.latest$</latest>
            </search>
            <fieldForLabel>initiator_id</fieldForLabel>
            <fieldForValue>initiator_id</fieldForValue>
            <default>*</default>
        </input>
        <input type="time" token="time_tok" searchWhenChanged="true">
            <label>Time Frame</label>
            <default>
                <earliest>-24h</earliest>
                <latest>now</latest>
            </default>
        </input>
    </fieldset>
    <row>
        <panel>
            <title>Host IOs/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(host_ios) by initiator_id usenull=f
                        useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">all</option>
                <option name="refresh.display">progressbar</option>
                <drilldown>
                    <link target="_self">/app/Dell-EMC-app-VMAX/host_summary
                    </link>
                </drilldown>
            </chart>
        </panel>
        <panel>
            <title>Response Time (ms)</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(response_time) by initiator_id
                        usenull=f useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">none</option>
            </chart>
        </panel>
        <panel>
            <title>Read Response Time (ms)</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(read_response_time) by initiator_id
                        usenull=f useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">none</option>
            </chart>
        </panel>
        <panel>
            <title>Write Response Time (ms)</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(write_response_time) by initiator_id
                        usenull=f useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">none</option>
            </chart>
        </panel>
    </row>
    <row>
        <panel>
            <title>Host MBs/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(mbs) by initiator_id usenull=f
                        useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">all</option>
                <drilldown>
                    <link target="_self">/app/Dell-EMC-app-VMAX/host_summary
                    </link>
                </drilldown>
            </chart>
        </panel>
        <panel>
            <title>Host MBs Read/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(host_mb_reads) by initiator_id
                        usenull=f useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">all</option>
                <drilldown>
                    <link target="_self">/app/Dell-EMC-app-VMAX/host_summary
                    </link>
                </drilldown>
            </chart>
        </panel>
        <panel>
            <title>Host MBs Written/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(host_mb_writes) by initiator_id
                        usenull=f useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">all</option>
                <drilldown>
                    <link target="_self">/app/Dell-EMC-app-VMAX/host_summary
                    </link>
                </drilldown>
            </chart>
        </panel>
    </row>
    <row>
        <panel>
            <title>Host Reads/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(reads) by initiator_id usenull=f
                        useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">all</option>
                <drilldown>
                    <link target="_self">/app/Dell-EMC-app-VMAX/host_summary
                    </link>
                </drilldown>
            </chart>
        </panel>
        <panel>
            <title>Host Writes/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(writes) by initiator_id usenull=f
                        useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">all</option>
                <drilldown>
                    <link target="_self">/app/Dell-EMC-app-VMAX/host_summary
                    </link>
                </drilldown>
            </chart>
        </panel>
        <panel>
            <title>Syscall Count/sec</title>
            <chart>
                <search base="vmax_24hr_data">
                    <query>timechart avg(sys_call_count) by initiator_id
                        usenull=f useother=f
                    </query>
                </search>
                <option name="charting.axisTitleX.visibility">collapsed
                </option>
                <option name="charting.axisTitleY.visibility">collapsed
                </option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.nullValueMode">zero</option>
                <option name="charting.drilldown">none</option>
            </chart>
        </panel>
    </row>
    <row>
        <panel>
            <title>Initiator Summary</title>
            <table>
                <search base="vmax_recent_data">
                    <query>
                        | table array_id, initiator_id, fc_id, host_id, type,
                        dir_port_keys{}, logged_in, on_fabric,
                        num_of_host_groups, host_group{}, num_of_masking_views,
                        masking_view{}, num_of_vols,
                        port_flags_override, enabled_flags{}, disabled_flags{}
                        | sort array_id, initiator_id
                        | rename array_id as "Array ID", initiator_id as
                        "Initiator ID", fc_id as "FC ID", host_id as
                        "Host ID", type as Type, dir_port_keys{} as "Dir:Port",
                        logged_in as "Logged In", on_fabric as
                        "On Fabric", num_of_host_groups as "# Host Groups",
                        host_group{} as "Host Groups",
                        num_of_masking_views as "# Masking Views",
                        masking_view{} as "Masking Views", num_of_vols as "#
                        Volumes", port_flags_override as "Port Flags Override",
                        enabled_flags{} as "Enabled Flags",
                        disabled_flags{} as "Disabled Flags"
                    </query>
                </search>
                <option name="drilldown">none</option>
            </table>
        </panel>
    </row>
    <row>
        <panel>
            <title>Active Initiator Performance Summary</title>
            <table>
                <search base="vmax_recent_data">
                    <query>| spath performance_metrics | search
                        performance_metrics=true
                        | eval r_host_ios=round(host_ios,2),
                        r_host_mb_reads=round(host_mb_reads,2),
                        r_host_mb_writes=round(host_mb_writes,2),
                        r_mbs=round(mbs,2),
                        r_response_time=round(response_time,2),
                        r_reads=round(reads,2),
                        r_read_response_time=round(read_response_time,2),
                        r_read_latency=round(read_latency,2),
                        r_writes=round(writes,2),
                        r_write_response_time=round(write_response_time,2),
                        r_write_latency=round(write_latency,2),
                        r_sys_call_count=round(sys_call_count,2)
                        | table array_id, initiator_id, host_id,
                        dir_port_keys{}, r_host_ios, r_host_mb_reads,
                        r_host_mb_writes, r_mbs, r_response_time, r_reads,
                        r_read_response_time, r_read_latency,
                        r_writes, r_write_response_time, r_write_latency,
                        r_sys_call_count
                        | sort array_id, initiator_id
                        | rename array_id as "Array ID", initiator_id as
                        "Initiator ID", host_id as "Host ID",
                        dir_port_keys{} as "Dir:Port", r_host_ios as "Host
                        IOs/sec", r_host_mb_reads as "Host MBs
                        Read/sec", r_host_mb_writes as "Host MBs Written/sec",
                        r_mbs as "Host MBs/sec", r_response_time
                        as "Response Time (ms)", r_reads as "Host Reads/sec",
                        r_read_response_time as "Read Response
                        Time (ms)", r_read_latency as "Read Latency (ms)",
                        r_writes as "Host Writes/sec",
                        r_write_response_time as "Write Response Time (ms)",
                        r_write_latency as "Write Latency (ms)",
                        r_sys_call_count as "SysCall Count/sec"
                    </query>
                </search>
                <option name="drilldown">none</option>
            </table>
        </panel>
    </row>
</form>
